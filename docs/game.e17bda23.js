parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"Qrww":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Node2D=void 0;class t{constructor(t){this.position=t}getPosition(){const t=[...this.position];if(this.parent){const o=this.parent.getPosition();t[0]+=o[0],t[1]+=o[1]}return t}draw(t){throw new Error("Method not implemented.")}}exports.Node2D=t;
},{}],"RhqW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Colors=void 0;const e=["#5F0F40","#D62626","#E36414","#F7B801","#53A548"];exports.Colors=e;
},{}],"MZXm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Tile=void 0;var e=require("./Node2D"),s=require("../../constants");class i extends e.Node2D{constructor(e,s,i){super(e),this.position=e,this.type=i,this.size=[0,0],this.padding=5,this.onClick=null,this.size=[s,s]}draw(e){const{position:[i,t],size:o,type:r}=this,[l,n]=o.map(e=>e-this.padding);e.fillStyle=s.Colors[r],e.fillRect(i,t,l,n)}}exports.Tile=i;
},{"./Node2D":"Qrww","../../constants":"RhqW"}],"LPsV":[function(require,module,exports) {
"use strict";function e(e,t,r){return e>=t&&e<=r}function t(t,r){const[o,n]=t,[s,i]=r.getPosition(),[u,c]=[r.size[0]+s,r.size[1]+i];return e(o,s,u)&&e(n,i,c)}function r(e){return[...e].sort(()=>Math.random()-.5)}function o(e,t){const r=[];let o;return e.forEach((e,n)=>(n%t==0&&(o=[],r.push(o)),o.push(e),o),[]),r}function n(e,t){return e.every((e,r)=>e.every((e,o)=>t[r][o]===e))}function s(e=5,t=!1){let n=[];for(let r=0;r<Math.pow(e,2);r++)n.push(r%e);return n=r(n),t||n.splice(-1,1,-1),console.log(n),o(n,e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isIntersecting=t,exports.shuffle=r,exports.splitArray=o,exports.compareMatrix=n,exports.createTileMatrix=s;
},{}],"M157":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Scene=void 0;var e=require("../../utils");class s{constructor(){this.children=[],this.background=null}add(e){this.children.push(e)}intersectNodes(s){const t=[],r=[...this.children];for(;r.length;){const i=r.shift();i.children?r.push(...i.children):(0,e.isIntersecting)(s,i)&&t.push(i)}return t}}exports.Scene=s;
},{"../../utils":"LPsV"}],"wf3O":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Renderer=void 0;class t{constructor(){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d")}drawBackground(t){const{context:e,canvas:s}=this;e.clearRect(0,0,s.width,s.height),e.fillStyle=t,e.fillRect(0,0,s.width,s.height)}drawNodes(t){t.forEach(t=>t.draw(this.context))}clear(){const{context:t,canvas:e}=this;t.clearRect(0,0,e.width,e.height)}render(t){const{context:e,canvas:s}=this;t.background&&this.drawBackground(t.background),this.drawNodes(t.children)}setSize(t,e){this.canvas.width=Math.floor(t),this.canvas.height=Math.floor(e)}get size(){return[this.canvas.width,this.canvas.height]}}exports.Renderer=t;
},{}],"kqf4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./Tile");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});var r=require("./Scene");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});var t=require("./Renderer");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}})});
},{"./Tile":"MZXm","./Scene":"M157","./Renderer":"wf3O"}],"JFh3":[function(require,module,exports) {
"use strict";function e(e){const t=e.target;return[e.clientX-t.offsetLeft,e.clientY-t.offsetTop]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.InputHandler=void 0;class t{constructor(t,n){this.canvas=t,this.scene=n,this.handleClick=(t=>{t.preventDefault();const{canvas:n,scene:s}=this,{width:c,height:i,clientWidth:o,clientHeight:l}=n,r=c/o,a=i/l,h=e(t);h[0]*=r,h[1]*=a,s.intersectNodes(h).forEach(e=>{e.onClick&&e.onClick(h)})}),t.addEventListener("click",this.handleClick)}}exports.InputHandler=t;
},{}],"iT0e":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Group=void 0;var e=require("./Node2D");class r extends e.Node2D{constructor(){super(...arguments),this.children=[]}add(e){this.children.push(e),e.parent=this}draw(e){e.save(),e.translate(...this.position),this.children.forEach(r=>r.draw(e)),e.restore()}}exports.Group=r;
},{"./Node2D":"Qrww"}],"ucuE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Grid=void 0;var i=require("../rendering/Group"),e=require("../rendering"),t=require("../../utils");function r(i,e,t){return t>=0&&t<i.length&&e>=0&&e<i[t].length&&-1===i[t][e]}class s extends i.Group{constructor(i,r=50,s=5,n=!1){super(i),this.tileSize=r,this.gridSize=s,this.full=n,this.isEnabled=!0,this.isUpdated=!1,this.tileMatrix=(0,t.createTileMatrix)(s,n),this.tileMatrix.forEach((i,t)=>{i.forEach((i,s)=>{if(-1===i)return;const n=new e.Tile([r*s,r*t],r,i);n.onClick=this.handleClick.bind(this,{type:i,tile:n,x:s,y:t}),this.add(n)})})}handleClick({x:i,y:e,tile:t,type:s}){if(!this.isEnabled)return!1;const{tileMatrix:n,tileSize:l}=this;[[1,0],[-1,0],[0,1],[0,-1]].some(([d,h])=>{const o=i+d,a=e+h;return!!r(n,o,a)&&(n[a][o]=s,n[e][i]=-1,t.position=[l*o,l*a],t.onClick=this.handleClick.bind(this,{type:s,tile:t,x:o,y:a}),!0)}),this.isUpdated=!0}}exports.Grid=s;
},{"../rendering/Group":"iT0e","../rendering":"kqf4","../../utils":"LPsV"}],"dgAm":[function(require,module,exports) {
"use strict";var e=require("./services/rendering"),r=require("./services/input"),i=require("./services/game/grid"),n=require("./utils");const s=new e.Renderer;s.setSize(1080,1920);const a=new e.Scene;a.background="#eeeeee";const t=new r.InputHandler(s.canvas,a),d=new i.Grid([140,40],160);a.add(d);const c=new i.Grid([300,1200],160,3,!0);c.isEnabled=!1,a.add(c);const o=()=>{requestAnimationFrame(o),s.render(a),d.isUpdated&&((0,n.compareMatrix)(c.tileMatrix,d.tileMatrix.slice(1,4).map(e=>e.slice(1,4)))&&alert("you won"),d.isUpdated=!1)};o(),document.body.appendChild(s.canvas);
},{"./services/rendering":"kqf4","./services/input":"JFh3","./services/game/grid":"ucuE","./utils":"LPsV"}]},{},["dgAm"], null)
//# sourceMappingURL=/bmind/game.e17bda23.js.map